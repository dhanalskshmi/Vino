@using Umbraco.Core.Logging
@using umbraco.MacroEngines
@using RJP.MultiUrlPicker.Models
@using Newtonsoft.Json
@using Umbraco.Web.Extensions
@using System.Linq
@using ManasquanBank.Web.Models;
@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
@{
    Layout = "Master.cshtml";



    var timelineListing = Model.Content.Children.Where("Visible");

    int currentYear = Convert.ToInt32(DateTime.Now.ToString("yyyy"));

    int startYear, endYear;
    var flag = false;
    List<IPublishedContent> timelineDetails;

}
@section InnerTopStyle {

    <link href="~/css/lib/jquery-ui.css" rel="stylesheet" />
}
<section class="heroBanner">
    <figure class="bannerImage" style="background-image: url('/images/banner/about_bg.jpg')"></figure>
</section>
<section class="heroBlock">
    <div class="containerWrapper">
        <div class="bgWrap">
            <h2>manasquan bank history timeline</h2>
            <div class="timelineWrappers">
                <div class="timelineWrapper">

                    <div class="decade-wrapper" id="decade-wrapper">
                        <ul class="tabs">
                            <li>
                                <a href="#1800">1800s-1950s</a>
                            </li>
                            <li>
                                <a href="#1950">1950s-1970s</a>
                            </li>
                            <li>
                                <a href="#1970">1970s-1990s</a>
                            </li>
                            <li>
                                <a href="#1990">1990s-2007</a>
                            </li>
                            <li>
                                <a href="#2008">2008-@currentYear</a>
                            </li>
                        </ul>
                        <select class="decade-year-dropdown" id="timeline_dropdown">
                            <option value="1800" selected>1800s-1950s</option>
                            <option value="1950">1950s-1970s</option>
                            <option value="1970">1970s-1990s</option>
                            <option value="1990">1990s-2007</option>
                            <option value="2008">2008-@currentYear</option>
                        </select>
                    </div>
                    <div class="timeline-wrapper">
                        @{
                            startYear = 1800;
                            endYear = 1950;

                            timelineDetails = timelineListing.DescendantsOrSelf("timelineItems").Where(x => x.HasValue("filterDate") && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) >= startYear && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) <= endYear).OrderBy(x => Convert.ToDateTime(x.GetPropertyValue<string>("filterDate"))).ToList();

                            flag = false;

                            if (timelineDetails != null)
                            {
                                <ul class="timeline invert-order active" id="1800">
                                    @foreach (var timelineDetail in timelineDetails)
                                    {
                                        var headline = timelineDetail.GetPropertyValue<string>("headlineText");
                                        var image = timelineDetail.GetPropertyValue<IPublishedContent>("image");
                                        var bodyText = timelineDetail.GetPropertyValue<string>("bodyText");

                                        if (flag == false)
                                        {
                                            <li class="timeline-inverted">
                                                <div class="timeline-badge primary">
                                                    <a>
                                                        <i class="timelineWrapper invert"></i>
                                                    </a>
                                                </div>
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }

                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }
                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>
                                            </li>

                                            flag = true;
                                        }
                                        else if (flag == true)
                                        {
                                            <li>
                                                <div class="timeline-badge primary">
                                                    <a>
                                                        <i class="timelineWrapper" rel="tooltip" title="11 hours ago via Twitter" id=""></i>
                                                    </a>
                                                </div>
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }

                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }
                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>

                                            </li>

                                            flag = false;
                                        }
                                    }

                                    <li class="clearfix" style="float: none;"></li>
                                </ul>
                            }

                        }
                        @{

                            startYear = 1950;
                            endYear = 1970;

                            timelineDetails = timelineListing.DescendantsOrSelf("timelineItems").Where(x => x.HasValue("filterDate") && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) >= startYear && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) <= endYear).OrderBy(x => Convert.ToDateTime(x.GetPropertyValue<string>("filterDate"))).ToList();

                            flag = false;
                            if (timelineDetails != null)
                            {
                                <ul class="timeline invert-order" id="1950">

                                    @foreach (var timelineDetail in timelineDetails)
                                    {
                                        var headline = timelineDetail.GetPropertyValue<string>("headlineText");
                                        var image = timelineDetail.GetPropertyValue<IPublishedContent>("image");
                                        var bodyText = timelineDetail.GetPropertyValue<string>("bodyText");

                                        if (flag == false)
                                        {
                                            <li class="timeline-inverted">
                                                <div class="timeline-badge primary">
                                                    <a>
                                                        <i class="timelineWrapper invert"></i>
                                                    </a>
                                                </div>
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }

                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }
                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>
                                            </li>

                                            flag = true;
                                        }
                                        else if (flag == true)
                                        {
                                            <li>
                                                <div class="timeline-badge primary">
                                                    <a>
                                                        <i class="timelineWrapper" rel="tooltip" title="11 hours ago via Twitter" id=""></i>
                                                    </a>
                                                </div>
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }

                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }
                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>

                                            </li>

                                            flag = false;
                                        }
                                    }
                                    <li class="clearfix" style="float: none;"></li>
                                </ul>
                            }
                        }
                        @{

                            startYear = 1950;
                            endYear = 1970;

                            timelineDetails = timelineListing.DescendantsOrSelf("timelineItems").Where(x => x.HasValue("filterDate") && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) >= startYear && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) <= endYear).OrderBy(x => Convert.ToDateTime(x.GetPropertyValue<string>("filterDate"))).ToList();

                            flag = false;
                            if (timelineDetails != null)
                            {
                                <ul class="timeline flex-order" id="1950_flex">
                                    @foreach (var timelineDetail in timelineDetails)
                                    {
                                        var headline = timelineDetail.GetPropertyValue<string>("headlineText");
                                        var image = timelineDetail.GetPropertyValue<IPublishedContent>("image");
                                        var bodyText = timelineDetail.GetPropertyValue<string>("bodyText");

                                        if (flag == false)
                                        {
                                            <li class="timeline-inverted">
                                                <div class="timeline-badge primary">
                                                    <a>
                                                        <i class="timelineWrapper" rel="tooltip" title="11 hours ago via Twitter" id=""></i>
                                                    </a>
                                                </div>
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }
                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }

                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                            flag = true;
                                        }
                                        else if (flag == true)
                                        {
                                            <li>
                                                <div class="timeline-badge primary"><a><i class="timelineWrapper invert"></i></a></div>
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }
                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }

                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>
                                            </li>

                                            flag = false;
                                        }
                                    }

                                    <li class="clearfix" style="float: none;"></li>
                                </ul>
                            }
                        }

                        @{
                            startYear = 1970;
                            endYear = 1990;

                            timelineDetails = timelineListing.DescendantsOrSelf("timelineItems").Where(x => x.HasValue("filterDate") && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) >= startYear && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) <= endYear).OrderBy(x => Convert.ToDateTime(x.GetPropertyValue<string>("filterDate"))).ToList();

                            flag = false;
                            if (timelineDetails != null)
                            {
                                <ul class="timeline invert-order" id="1970">
                                    @foreach (var timelineDetail in timelineDetails)
                                    {
                                        var headline = timelineDetail.GetPropertyValue<string>("headlineText");
                                        var image = timelineDetail.GetPropertyValue<IPublishedContent>("image");
                                        var bodyText = timelineDetail.GetPropertyValue<string>("bodyText");

                                        if (flag == false)
                                        {
                                            <li class="timeline-inverted">
                                                <div class="timeline-badge primary">
                                                    <a>
                                                        <i class="timelineWrapper invert"></i>
                                                    </a>
                                                </div>
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }

                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }
                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>
                                            </li>

                                            flag = true;
                                        }
                                        else if (flag == true)
                                        {
                                            <li>
                                                <div class="timeline-badge primary">
                                                    <a>
                                                        <i class="timelineWrapper" rel="tooltip" title="11 hours ago via Twitter" id=""></i>
                                                    </a>
                                                </div>
                                                
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }

                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }
                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>

                                            </li>

                                            flag = false;
                                        }
                                    }
                                    <li class="clearfix" style="float: none;"></li>
                                </ul>
                            }

                        }
                        @{
                            startYear = 1970;
                            endYear = 1990;

                            timelineDetails = timelineListing.DescendantsOrSelf("timelineItems").Where(x => x.HasValue("filterDate") && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) >= startYear && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) <= endYear).OrderBy(x => Convert.ToDateTime(x.GetPropertyValue<string>("filterDate"))).ToList();

                            flag = false;
                            if (timelineDetails != null)
                            {
                                <ul class="timeline flex-order" id="1970_flex">
                                    @foreach (var timelineDetail in timelineDetails)
                                    {
                                        var headline = timelineDetail.GetPropertyValue<string>("headlineText");
                                        var image = timelineDetail.GetPropertyValue<IPublishedContent>("image");
                                        var bodyText = timelineDetail.GetPropertyValue<string>("bodyText");

                                        if (flag == false)
                                        {
                                            <li class="timeline-inverted">
                                                <div class="timeline-badge primary">
                                                    <a>
                                                        <i class="timelineWrapper" rel="tooltip" title="11 hours ago via Twitter" id=""></i>
                                                    </a>
                                                </div>
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }
                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }

                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                            flag = true;
                                        }
                                        else if (flag == true)
                                        {
                                            <li>
                                                <div class="timeline-badge primary"><a><i class="timelineWrapper invert"></i></a></div>
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }
                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }

                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>
                                            </li>

                                            flag = false;
                                        }
                                    }


                                    <li class="clearfix" style="float: none;"></li>
                                </ul>

                            }
                        }

                        @{
                            startYear = 1990;
                            endYear = 2007;

                            timelineDetails = timelineListing.DescendantsOrSelf("timelineItems").Where(x => x.HasValue("filterDate") && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) >= startYear && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) <= endYear).OrderBy(x => Convert.ToDateTime(x.GetPropertyValue<string>("filterDate"))).ToList();

                            flag = false;


                            if (timelineDetails != null)
                            {
                                <ul class="timeline invert-order" id="1990">
                                    @foreach (var timelineDetail in timelineDetails)
                                    {
                                        var headline = timelineDetail.GetPropertyValue<string>("headlineText");
                                        var image = timelineDetail.GetPropertyValue<IPublishedContent>("image");
                                        var bodyText = timelineDetail.GetPropertyValue<string>("bodyText");

                                        if (flag == false)
                                        {
                                            <li class="timeline-inverted">
                                                <div class="timeline-badge primary">
                                                    <a>
                                                        <i class="timelineWrapper invert"></i>
                                                    </a>
                                                </div>
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }

                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }
                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>
                                            </li>

                                            flag = true;
                                        }
                                        else if (flag == true)
                                        {
                                            <li>
                                                <div class="timeline-badge primary">
                                                    <a>
                                                        <i class="timelineWrapper" rel="tooltip" title="11 hours ago via Twitter" id=""></i>
                                                    </a>
                                                </div>
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }

                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }
                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>

                                            </li>

                                            flag = false;
                                        }
                                    }
                                    <li class="clearfix" style="float: none;"></li>
                                </ul>
                            }
                        }
                        @{
                            startYear = 1990;
                            endYear = 2007;

                            timelineDetails = timelineListing.DescendantsOrSelf("timelineItems").Where(x => x.HasValue("filterDate") && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) >= startYear && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) <= endYear).OrderBy(x => Convert.ToDateTime(x.GetPropertyValue<string>("filterDate"))).ToList();

                            flag = false;
                            if (timelineDetails != null)
                            {
                                <ul class="timeline flex-order" id="1990_flex">
                                    @foreach (var timelineDetail in timelineDetails)
                                    {
                                        var headline = timelineDetail.GetPropertyValue<string>("headlineText");
                                        var image = timelineDetail.GetPropertyValue<IPublishedContent>("image");
                                        var bodyText = timelineDetail.GetPropertyValue<string>("bodyText");

                                        if (flag == false)
                                        {
                                            <li class="timeline-inverted">
                                                <div class="timeline-badge primary">
                                                    <a>
                                                        <i class="timelineWrapper" rel="tooltip" title="11 hours ago via Twitter" id=""></i>
                                                    </a>
                                                </div>
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }
                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }

                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                            flag = true;
                                        }
                                        else if (flag == true)
                                        {
                                            <li>
                                                <div class="timeline-badge primary"><a><i class="timelineWrapper invert"></i></a></div>
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }
                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }

                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>
                                            </li>

                                            flag = false;
                                        }
                                    }


                                    <li class="clearfix" style="float: none;"></li>
                                </ul>
                            }

                        }

                        @{

                            startYear = 2007;
                            endYear = currentYear;

                            timelineDetails = timelineListing.DescendantsOrSelf("timelineItems").Where(x => x.HasValue("filterDate") && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) >= startYear && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) <= endYear).OrderBy(x => Convert.ToDateTime(x.GetPropertyValue<string>("filterDate"))).ToList();

                            flag = false;
                            if (timelineDetails != null)
                            {
                                <ul class="timeline invert-order" id="2008">
                                    @foreach (var timelineDetail in timelineDetails)
                                    {
                                        var headline = timelineDetail.GetPropertyValue<string>("headlineText");
                                        var image = timelineDetail.GetPropertyValue<IPublishedContent>("image");
                                        var bodyText = timelineDetail.GetPropertyValue<string>("bodyText");

                                        if (flag == false)
                                        {
                                            <li class="timeline-inverted">
                                                <div class="timeline-badge primary">
                                                    <a>
                                                        <i class="timelineWrapper invert"></i>
                                                    </a>
                                                </div>
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }

                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }
                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>
                                            </li>

                                            flag = true;
                                        }
                                        else if (flag == true)
                                        {
                                            <li>
                                                <div class="timeline-badge primary">
                                                    <a>
                                                        <i class="timelineWrapper" rel="tooltip" title="11 hours ago via Twitter" id=""></i>
                                                    </a>
                                                </div>
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }

                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }
                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>

                                            </li>

                                            flag = false;
                                        }
                                    }
                                    <li class="clearfix" style="float: none;"></li>
                                </ul>
                            }
                        }

                        @{

                            startYear = 2007;
                            endYear = currentYear;

                            timelineDetails = timelineListing.DescendantsOrSelf("timelineItems").Where(x => x.HasValue("filterDate") && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) >= startYear && int.Parse(x.GetPropertyValue<DateTime>("filterDate").ToString("yyyy")) <= endYear).OrderBy(x => Convert.ToDateTime(x.GetPropertyValue<string>("filterDate"))).ToList();

                            flag = false;
                            if (timelineDetails != null)
                            {
                                <ul class="timeline flex-order" id="2008_flex">
                                    @foreach (var timelineDetail in timelineDetails)
                                    {
                                        var headline = timelineDetail.GetPropertyValue<string>("headlineText");
                                        var image = timelineDetail.GetPropertyValue<IPublishedContent>("image");
                                        var bodyText = timelineDetail.GetPropertyValue<string>("bodyText");

                                        if (flag == false)
                                        {
                                            <li class="timeline-inverted">
                                                <div class="timeline-badge primary">
                                                    <a>
                                                        <i class="timelineWrapper" rel="tooltip" title="11 hours ago via Twitter" id=""></i>
                                                    </a>
                                                </div>
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }
                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }

                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                            flag = true;
                                        }
                                        else if (flag == true)
                                        {
                                            <li>
                                                <div class="timeline-badge primary"><a><i class="timelineWrapper invert"></i></a></div>
                                                <div class="timeline-panel is-hidden">
                                                    <div class="timeline-heading">
                                                        @if (image != null)
                                                        {
                                                            <img class="img-responsive" src="@image.Url" />
                                                        }
                                                    </div>
                                                    <div class="timeline-body">
                                                        @if (!string.IsNullOrEmpty(headline))
                                                        {
                                                            <p class="date">@headline</p>
                                                        }

                                                        <div class="contentBlock">
                                                            @if (!string.IsNullOrEmpty(bodyText))
                                                            {
                                                                @Html.Raw(bodyText)
                                                            }

                                                        </div>
                                                    </div>
                                                </div>
                                            </li>

                                            flag = false;
                                        }
                                    }
                                    <li class="clearfix" style="float: none;"></li>
                                </ul>
                            }
                        }

                        @*<ul class="timeline flex-order" id="1940">
                                <li>
                                    <div class="timeline-badge primary"><a><i class="timelineWrapper"></i></a></div>
                                    <div class="timeline-panel is-hidden">
                                        <div class="timeline-heading">
                                            <img class="img-responsive" src="/images/history/history_img1.jpg" />
                                        </div>
                                        <div class="timeline-body">
                                            <p class="date">1921: Over the River</p>
                                            <div class="contentBlock">
                                                <p>
                                                    SMP moves across the East River to Long Island City, NY.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="timeline-badge primary"><a><i class="timelineWrapper"></i></a></div>
                                    <div class="timeline-panel is-hidden">
                                        <div class="timeline-heading">
                                            <img class="img-responsive" src="/images/history/history_img2.jpg" />
                                        </div>
                                        <div class="timeline-body">
                                            <p class="date">1921: Over the River</p>
                                            <div class="contentBlock">
                                                <p>
                                                    SMP moves across the East River to Long Island City, NY.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="timeline-badge primary"><a><i class="timelineWrapper"></i></a></div>
                                    <div class="timeline-panel is-hidden">
                                        <div class="timeline-heading">
                                            <img class="img-responsive" src="/images/history/history_img3.jpg" />
                                        </div>
                                        <div class="timeline-body">
                                            <p class="date">1921: Over the River</p>
                                            <div class="contentBlock">
                                                <p>
                                                    SMP moves across the East River to Long Island City, NY.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="timeline-badge primary"><a><i class="timelineWrapper"></i></a></div>
                                    <div class="timeline-panel is-hidden">
                                        <div class="timeline-heading">
                                            <img class="img-responsive" src="/images/history/history_img4.jpg" />
                                        </div>
                                        <div class="timeline-body">
                                            <p class="date">1921: Over the River</p>
                                            <div class="contentBlock">
                                                <p>
                                                    SMP moves across the East River to Long Island City, NY.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="timeline-badge primary"><a><i class="timelineWrapper"></i></a></div>
                                    <div class="timeline-panel is-hidden">
                                        <div class="timeline-heading">
                                            <img class="img-responsive" src="/images/history/history_img5.jpg" />
                                        </div>
                                        <div class="timeline-body">
                                            <p class="date">1921: Over the River</p>
                                            <div class="contentBlock">
                                                <p>
                                                    SMP moves across the East River to Long Island City, NY.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li class="clearfix" style="float: none;"></li>
                            </ul>
                            <ul class="timeline flex-order" id="1940_flex">
                                <li>
                                    <div class="timeline-badge primary"><a><i class="timelineWrapper"></i></a></div>
                                    <div class="timeline-panel is-hidden">
                                        <div class="timeline-heading">
                                            <img class="img-responsive" src="/images/history/history_img1.jpg" />
                                        </div>
                                        <div class="timeline-body">
                                            <p class="date">1921: Over the River</p>
                                            <div class="contentBlock">
                                                <p>
                                                    SMP moves across the East River to Long Island City, NY.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="timeline-badge primary"><a><i class="timelineWrapper"></i></a></div>
                                    <div class="timeline-panel is-hidden">
                                        <div class="timeline-heading">
                                            <img class="img-responsive" src="/images/history/history_img2.jpg" />
                                        </div>
                                        <div class="timeline-body">
                                            <p class="date">1921: Over the River</p>
                                            <div class="contentBlock">
                                                <p>
                                                    SMP moves across the East River to Long Island City, NY.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="timeline-badge primary"><a><i class="timelineWrapper"></i></a></div>
                                    <div class="timeline-panel is-hidden">
                                        <div class="timeline-heading">
                                            <img class="img-responsive" src="/images/history/history_img3.jpg" />
                                        </div>
                                        <div class="timeline-body">
                                            <p class="date">1921: Over the River</p>
                                            <div class="contentBlock">
                                                <p>
                                                    SMP moves across the East River to Long Island City, NY.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="timeline-badge primary"><a><i class="timelineWrapper"></i></a></div>
                                    <div class="timeline-panel is-hidden">
                                        <div class="timeline-heading">
                                            <img class="img-responsive" src="/images/history/history_img4.jpg" />
                                        </div>
                                        <div class="timeline-body">
                                            <p class="date">1921: Over the River</p>
                                            <div class="contentBlock">
                                                <p>
                                                    SMP moves across the East River to Long Island City, NY.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="timeline-badge primary"><a><i class="timelineWrapper"></i></a></div>
                                    <div class="timeline-panel is-hidden">
                                        <div class="timeline-heading">
                                            <img class="img-responsive" src="/images/history/history_img5.jpg" />
                                        </div>
                                        <div class="timeline-body">
                                            <p class="date">1921: Over the River</p>
                                            <div class="contentBlock">
                                                <p>
                                                    SMP moves across the East River to Long Island City, NY.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li class="clearfix" style="float: none;"></li>
                            </ul>*@

                    </div>
                </div>

            </div>

        </div>
    </div>
</section>
@section InnerBottomScript {
    <script src="~/scripts/lib/jquery-ui.js"></script>
}
